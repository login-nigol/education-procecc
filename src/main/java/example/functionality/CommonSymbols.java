package example.functionality;

import java.util.*;

public class CommonSymbols { // Общие символы


    public List<String> getCommonChars(String[] arr) {
        List<String> commonChars = new ArrayList<>(); // Список для хранения общих символов
        int[] freq = new int[26]; // Массив для хранения минимальных частот символов в каждой строке
        Arrays.fill(freq, Integer.MAX_VALUE); // Инициализируем массив частот значениями Integer.MAX_VALUE
        // Здесь мы создаем пустой список commonChars для хранения общих символов. Также создаем массив freq
        // размером 26 (для всех букв английского алфавита) и инициализируем его значениями Integer.MAX_VALUE.
        // Это делается для того, чтобы в дальнейшем мы могли находить минимальные частоты символов.


        for (String currentEl : arr) { // Проходим по каждой строке в массиве
            int[] freqIn = new int[26]; // Массив для хранения частот символов в текущей строке
            for (char c : currentEl.toCharArray()) { // Подсчитываем частоты символов в текущей строке
                freqIn[c - 'a']++; // 'a' имеет индекс 0, 'b' имеет индекс 1 и т.д.
              } // Здесь происходит несколько операций:
                // c - 'a': вычитание символа 'a' из текущего символа c. Это вычисляет смещение символа c относительно символа 'a'.
                // В результате получается индекс массива freqIn, который соответствует позиции символа в алфавите.
                // Если c равно 'a', то c - 'a' будет 0.
                // Если c равно 'b', то c - 'a' будет 1.
                // Если c равно 'z', то c - 'a' будет 25.
                // freqIn[c - 'a']++: увеличивает значение элемента массива freqIn на позиции, соответствующей индексу,
                // вычисленному на предыдущем шаге. Это означает, что для каждого символа c из строки currentEl увеличивается
                // счетчик количества вхождений этого символа в строке.

            for (int i = 0; i < 26; i++) { // Обновляем массив частот, чтобы он содержал минимальные значения для каждого символа
                freq[i] = Math.min(freq[i], freqIn[i]);
            }
        }
        // В этом блоке мы проходим по каждой строке в массиве arr. Для каждой строки создаем новый массив freqIn
        // для подсчета частот символов в этой строке. Затем обновляем массив freq, чтобы он содержал минимальные частоты символов,
        // встречающихся во всех строках.



        for (int i = 0; i < 26; i++) { // Создаем список общих символов на основе частот
            while (freq[i] > 0) { // Если частота символа больше 0
                commonChars.add(String.valueOf((char) (i + 'a'))); // Преобразуем индекс обратно в символ и добавляем его в список
                freq[i]--; // Уменьшаем частоту на 1
            }
        }   // Здесь мы проходим по массиву freq и добавляем символы в список commonChars, если их частота больше 0.
            // Индекс i преобразуется обратно в символ с помощью (char) (i + 'a').

        return commonChars; // Возвращаем список общих символов
    }

    public static void main(String[] args) {
        CommonSymbols solution = new CommonSymbols();
        String[] arr = {"bella", "label", "roller"};
        System.out.println(solution.getCommonChars(arr));
    }
}
// "erdbeeren", "himbeeren", "birne", "kartoffeln"

// Минимальные частоты символов — это минимальные значения частот (число вхождений) каждого символа в наборе текстов или
// других данных. Обычно такие частоты вычисляются для анализа текстов, чтобы определить, какие символы встречаются реже всего.
// Это полезно для различных задач, включая криптографию, сжатие данных и обработку естественного языка.
//
// Рассмотрим пример. Пусть у нас есть следующий текст:
//
// "Пример текста для анализа"
//
//Для этого текста мы можем вычислить частоты символов:
//
//Пробел: 3 раза
//П: 1 раз
//р: 2 раза
//и: 2 раза
//м: 1 раз
//е: 2 раза
//т: 2 раза
//к: 1 раз
//с: 1 раз
//а: 3 раза
//д: 1 раз
//л: 1 раз
//з: 1 раз
//В этом примере минимальная частота символов составляет 1, так как символы "П", "м", "к", "с", "д", "л" и "з" встречаются
// по одному разу.
//
//Таким образом, минимальная частота символов позволяет определить, какие символы являются наименее частыми в данном тексте.